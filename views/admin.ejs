<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Produtos</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">


 <div class="w-full max-w-3xl bg-white rounded-2xl shadow-lg p-6">
    <h1 class="text-2xl font-bold mb-4 text-gray-700">Cadastro de Produtos</h1>

    <!-- Formulário -->
    <form id="formProduto" class="grid grid-cols-1 gap-4">
      <input id="titulo" type="text" placeholder="Título" 
        class="p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">

      <textarea id="descricao" placeholder="Descrição" rows="3"
        class="p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>

      <input id="valor" type="number" placeholder="Valor (R$)" step="0.01"
        class="p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">

	<textarea id="observacao" placeholder="Observação" rows="3"
        class="p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>


		<!-- NOVOS CHECKBOXES -->
		<div class="flex space-x-6 items-center">
		  <label class="flex items-center space-x-2">
			<input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" id="grafica">
			<span class="text-gray-700">Gráfica</span>
		  </label>
		  <label class="flex items-center space-x-2">
			<input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" id="brindes">
			<span class="text-gray-700">Brindes</span>
		  </label>
		</div>
	
      <button type="submit" 
        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
        Cadastrar Produto
      </button>
    </form>
  </div>

  <script>
	document.getElementById("formProduto").addEventListener("keydown", function (e) {
		if (e.key === "Enter" && e.target.tagName !== "TEXTAREA") {
		  e.preventDefault(); // impede o envio
		  return false;
		}
	  });
  
    const API_URL = "http://localhost:3000"; // sua API Node.js

    const form = document.getElementById("formProduto");
    const lista = document.getElementById("listaProdutos");

    // Cadastro de produto
    form.addEventListener("submit", async function(e) {
      e.preventDefault();

	
		
      const produto = {
        titulo: document.getElementById("titulo").value.trim(),
        descricao: document.getElementById("descricao").value.trim(),
        valor: document.getElementById("valor").value.trim(),
        observacao: document.getElementById("observacao").value.trim(),
		grafica: document.getElementById('grafica').checked, // true / false
		brindes: document.getElementById('brindes').checked,  // true / false
		lancamentos: 1
      };

      if (!produto.titulo || !produto.valor) {
        alert("Preencha ao menos o Título e o Valor!");
        return;
      }

      try {
        const resposta = await fetch(`${API_URL}/produto`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(produto)
        });

        const data = await resposta.json();

        if (data.sucesso) {
          alert("Produto cadastrado com sucesso!");
          form.reset();
          //carregarProdutos();
        } else {
          alert("Erro: " + data.erro);
        }
      } catch (err) {
        console.error("Erro ao cadastrar:", err);
        alert("Erro ao cadastrar produto!");
      }
    });

    // Carregar produtos ao abrir a página
    //carregarProdutos();
  </script>
  <script>
const grafica = document.getElementById('grafica');
const brindes = document.getElementById('brindes');

// quando marcar "Gráfica", desmarca "Brindes"
grafica.addEventListener('change', () => {
  if (grafica.checked) brindes.checked = false;
});

// quando marcar "Brindes", desmarca "Gráfica"
brindes.addEventListener('change', () => {
  if (brindes.checked) grafica.checked = false;
});
</script>
</body>
</html>
